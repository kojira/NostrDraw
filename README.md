# 🎨 NostrDraw

Nostrで絵を描いて共有するWebアプリ。

**[→ 今すぐ使う](https://kojira.github.io/NostrDraw/)**

## 特徴

### 🖌️ SVGベースのお絵描き

ストロークデータをSVGとして保存。ラスタ画像と違い、拡大しても劣化しません。描画時のストロークアニメーションも再現可能。

- ペン / 消しゴム / テキストツール
- ブラシサイズ・透明度の調整
- 日本語フォント選択（Google Fonts）
- レイヤー機能
- Undo / Redo
- 組み込みスタンプ＆テンプレート
- 背景色の変更

### 🎮 ピクセルアートモード

グリッド表示でドット絵が描けるモード。正方形のキャンバスでレトロなドット絵を作成できます。

### 🔗 描き足し（コラボレーション）

他ユーザーの作品に描き足して投稿できます。親子関係はNIP-10形式のeタグで管理され、ツリー表示で辿れます。

### 🏷️ カテゴリタグ

- 投稿にタグを付けて分類
- プリセットタグ＆自由入力
- タグをフォローして専用タイムラインで閲覧
- 人気タグの表示
- 投稿後のタグ編集にも対応

### 🎨 カラーパレット

- 複数パレットの管理・切り替え
- カスタムカラーの追加（最大64色）
- パレットをNostrに保存・共有
- パレットギャラリーで他ユーザーのパレットをインポート
- 15種類以上のプリセットパレット（8bit、パステル、和風、RPGなど）
- お気に入りパレットのNostr同期

### 😀 カスタム絵文字対応

NIP-30のカスタム絵文字をスタンプとして使用可能。ユーザーの絵文字リスト（kind 10030）から自動取得。移動・拡大縮小にも対応。

### 📦 SVG圧縮 & リレー投稿

SVGデータはgzip圧縮+Base64エンコードしてkind 31898イベントのcontentに格納。リレーへの負荷を最小限に。

### 🖼️ 画像自動アップロード

投稿時にSVGをPNGに変換し、NIP-96対応サーバー（share.yabu.me）に自動アップロード。kind 1イベントに画像URLを含めることで、他のNostrクライアントでもプレビュー表示されます。

### 🔔 通知

- リアクション通知
- 未読バッジ表示（クロスデバイス同期）

### 🔐 複数のログイン方法

- **NIP-07** — ブラウザ拡張機能（nos2x, Albyなど）
- **パスワード＋追加シークレット** — 拡張機能なしでもアカウント作成・ログイン可能

### 🌍 その他の機能

- **多言語対応** — 日本語 / English
- **テーマ切替** — ダーク / ライト
- **タイムライン** — ホーム（フォロー＋自分） / グローバル / タグ
- **ギャラリー** — 人気・新着の投稿・パレットを閲覧
- **プロフィール** — 編集・ユーザーギャラリー
- **リレー設定** — NIP-65からのインポート対応

## 技術仕様

### イベント

| Kind | 用途 |
|------|------|
| 0 | プロフィール（メタデータ） |
| 1 | タイムライン共有（画像URL付き） |
| 3 | フォローリスト |
| 7 | リアクション |
| 10002 | リレーリスト（NIP-65） |
| 10030 | カスタム絵文字リスト |
| 30897 | 通知既読状態（NIP-33） |
| 30898 | 投稿タグ情報（NIP-33） |
| 30899 | タグフォローリスト（NIP-33） |
| 31898 | NostrDraw投稿（SVGデータを含む） |
| 31899 | カラーパレット |

### 対応NIP

- **NIP-01** — 基本プロトコル
- **NIP-07** — ブラウザ拡張機能による署名
- **NIP-10** — イベント参照（コラボレーション用eタグ）
- **NIP-12** — ハッシュタグ（tタグ）
- **NIP-30** — カスタム絵文字
- **NIP-33** — アドレス指定可能イベント（タグ・通知管理）
- **NIP-65** — リレーリスト
- **NIP-96** — 画像アップロード
- **NIP-98** — HTTP認証

### デフォルトリレー

```
wss://yabu.me
wss://r.kojira.io
wss://x.kojira.io
```

### 画像アップロードサーバー

- share.yabu.me（NIP-96対応）

## 開発

```bash
pnpm install
pnpm dev      # 開発サーバー起動
pnpm build    # プロダクションビルド
```

### 技術スタック

- **フレームワーク**: React 19 / TypeScript / Vite
- **Nostr**: rx-nostr（リレー通信） / nostr-tools（型定義・ユーティリティ）
- **スタイリング**: CSS Modules
- **圧縮**: pako（gzip）

## ライセンス

MIT

---

Made with ❤️ for the Nostr community
